# 파일 저장 및 변환 시 비동기 문제
* 파일 저장과 파일 변환 둘다 비동기 처리함
* 파일 저장에서 tomcat tmp 파일 오류가 계속 발생 IO Exception
  * 해결하기가 까다로워서 파일 저장하는 부분은 동기처리
  * 파일 변환하는 부분은 그대로 비동기 처리하기로 함

# 업로드 템프파일
* 플레이어가 파일을 업로드하고 쿠키를 만들지않는다면?
  * hls는 s3 업로드 실패해도 finally로 삭제 시킴
  * 문제는 s3에 있는 임시파일들
  * Video 파일들 중 cookie 아이들이 null인데 8시간이상 지난 업로드 파일들은 스케쥴링으로 삭제 

# 로그인 후 필터에서 response에 유저 정보 dto 담아서 보낼 때
* 한글이 깨져서 보임 인코딩 문제
* application/json에 charset=utf-8 까지 추가해서 해결

# 최근 본 영상 기록 시
* 고민했던 점
  * redis에만 ttl 걸어서 저장해둘지
  * db에도 같이 저장해줄지
    * 나중에 추천 알고리즘이나 통계에 필요한 데이터라 예상돼서 db에도 저장하기로 결정함
      * 시청할 때마다 계속 db에 쿼리를 날리는 점이 추후에 영향이 있을 것 같다.
    * 중복 시청 시 db에 cookie Id가 똑같은 데이터들이 쌓임(시청 시간만 다름)
      * 이 문제로 쿼리가 복잡해졌다.
      * 그래서 테이블에 viewAt이라는 컬럼을 넣어주고 저장하기 전에 기록이 이미 남겨져 있다면 viewAt을 현재 시간으로 업데이트해주고 아니면 기록을 새로 만들어서 저장하도록 변경